# Makefile for programming the ATtiny85
# modified the one generated by CrossPack

DEVICE      = attiny85
CLOCK      = 8000000
PROGRAMMER = -c usbtiny 
# for ATTiny85
# see http://www.engbedded.com/fusecalc/
FUSES       = -U lfuse:w:0xE2:m -U hfuse:w:0xdf:m -U efuse:w:0xff:m 

# Tune the lines below only if you know what you are doing:
AVRDUDE = avrdude $(PROGRAMMER) -p $(DEVICE)
COMPILE = avr-gcc -Wall -Os -DF_CPU=$(CLOCK) -mmcu=$(DEVICE)

ifndef ID
$(error ID is not set. Please use ID=<number> on command line)
endif

flash:
	python patchid.py $(ID)
	$(AVRDUDE) -B 3 -c usbasp -U flash:w:baromdisp-85.ino.withid.hex:i

fuse:
	$(AVRDUDE) -B 3 -c usbasp $(FUSES)
